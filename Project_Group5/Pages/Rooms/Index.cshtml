@page
@model Project_Group5.Pages.Rooms.IndexModel
@{
    var rooms = Model.Rooms;
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hotel Room</title>
    <link href="../css/listroom.css" rel="stylesheet">
</head>
<body>
    <main>
        <div class="search-bar">
            <form class="row g-3 align-items-center">
                <div class="col-auto">
                    <label for="checkin-date" class="col-form-label">Ngày đến</label>
                    <input type="date" id="checkin-date" class="form-control" value="2024-10-25">
                </div>

                <div class="col-auto">
                    <label for="checkout-date" class="col-form-label">Ngày đi</label>
                    <input type="date" id="checkout-date" class="form-control" value="2024-10-26">
                </div>

                <div class="col-auto">
                    <label for="promo-code" class="col-form-label">Mã khuyến mại</label>
                    <input type="text" id="promo-code" class="form-control" placeholder="Mã khuyến mại">
                </div>

                <div class="col-auto">
                    <button type="submit" class="book-now-btn">Kiểm tra phòng</button>
                </div>
            </form>
        </div>




        <div class="row">
            <div class="col-md-8">
                <!-- Danh sách phòng -->
                <div class="container my-5">
                    @foreach (var room in rooms)
                    {
                            <div class="room-card">
                                <div class="room-info">
                                    <div id="roomCarousel_@room.Id" class="carousel slide col-md-6" data-bs-ride="carousel">
                                        <div class="carousel-inner">
                                        @foreach (var image in room.ImageRooms)
                                        {
                                                    <div class="carousel-item @(image == room.ImageRooms.First() ? "active" : "")">
                                                        <img src="/images/@image.Path" class="d-block w-100 room-image" alt="Room Image">
                                                    </div>
                                        }
                                        </div>
                                        <button class="carousel-control-prev" type="button" data-bs-target="#roomCarousel_@room.Id" data-bs-slide="prev">
                                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                            <span class="visually-hidden">Previous</span>
                                        </button>
                                        <button class="carousel-control-next" type="button" data-bs-target="#roomCarousel_@room.Id" data-bs-slide="next">
                                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                            <span class="visually-hidden">Next</span>
                                        </button>
                                    </div>

                                    <div class="room-details col-md-6">
                                        <h2>@room.Name</h2>
                                        <p>29 m² | 1 King Bed</p>
                                        <ul class="amenities">
                                            <li><i class="fa fa-wifi"></i> Free Wifi</li>
                                            <li><i class="fa fa-tv"></i> Television</li>
                                            <li><i class="fa fa-bath"></i> Bathtub</li>
                                            <li><i class="fa fa-parking"></i> Parking</li>
                                        </ul>
                                        <p class="price">Giá chỉ từ: <strong>@room.Price VND</strong> / đêm</p>
                                        <button class="choose-btn col-md-6" data-bs-toggle="collapse" data-bs-target="#roomOptions_@room.Id" aria-expanded="false" aria-controls="roomOptions_@room.Id">
                                            Lựa chọn
                                        </button>
                                    </div>
                                </div>

                                <!-- Hidden by default, shown when "Lựa chọn" is clicked -->
                                <div id="roomOptions_@room.Id" class="room-options collapse">
                                    <p><strong>@room.Name (Room Only)</strong></p>
                                    <p><del>@(room.Price) VND</del> <strong>@room.Price VND</strong> / night</p>
                                    <label for="room-count">Select Room:</label>
                                    <select id="room-count">
                                            <option value="0">0 phòng</option>
                                    @for (int i = 1; i <= room.Rooms.Where(r => r.Status == 1).Count(); i++) 
                                    {
                                        <option value="@i">@i phòng</option>
                                    }
                                    </select>

                                    <label for="children-count">Trẻ em (6-11 tuổi):</label>
                                    <select id="children-count">
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                        <option value="2">2</option>
                                    </select>

                                    <p>Total: <strong>@room.Price VND</strong></p>
                                    <button class="book-now-btn">Đặt Ngay</button>
                                </div>
                            </div>
                    }
                </div>
            </div>

            <div class="col-md-4">
                <!-- Thông tin phòng đã chọn nằm bên phải -->
                <div class="selected-rooms">
                    <h3>Thông Tin Phòng</h3>
                    <div class="selected-room">
                        <p><strong>Mandala Hotel & Suites Bắc Giang</strong></p>
                        <p>25/10/2024 - 26/10/2024 (1 đêm)</p>
                        <p>Phòng: 1 M Continental - Double Room</p>
                        <p><strong>M CONTINENTAL (ROOM ONLY)</strong></p>
                        <p>1 người lớn - 0 trẻ em</p>
                        <p>632,500 VND / đêm</p>
                        <p><strong>Tổng cộng: 632,500 VND</strong></p>
                        <button class="book-now-btn">Đặt Ngay</button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>

<script>
    // Select all collapse toggle buttons
    document.querySelectorAll('.choose-btn').forEach(button => {
        button.addEventListener('click', function () {
            const target = document.querySelector(this.getAttribute('data-bs-target')); // Get the target element
            const isCollapsed = target.style.display === 'block'; // Check if it's currently shown

            // Toggle the display property
            target.style.display = isCollapsed ? 'none' : 'block';

            // Optionally, you can add smooth transitions
            if (!isCollapsed) {
                target.style.transition = 'max-height 0.2s ease-in-out'; // Optional smooth transition
                target.style.maxHeight = target.scrollHeight + 'px'; // Set to full height for smooth opening
            } else {
                target.style.maxHeight = '0'; // Collapse the options
            }
        });
    });
</script>

</html>
